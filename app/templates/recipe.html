{% extends 'base.html' %}

<!-- Browser tab title and page title -->
{% block header %}
	<br>
	<h1>{% block title %}{{recipe.recipe_desc}}{% endblock %}</h1>
	<a href="{{ url_for('edit_recipe', id=recipe.recipe_id) }}" class="btn btn-warning">
    Edit Recipe
</a>
	<a href="#" class="btn btn-info" onclick="copyShareLink()">Share</a>
	<!-- Social Share Buttons (Visual Placeholders) -->
<div class="mt-2">
  <a href="#" class="btn btn-outline-primary btn-sm me-1">
    <i class="fab fa-facebook-f"></i>
  </a>
  <a href="#" class="btn btn-outline-info btn-sm me-1">
    <i class="fab fa-twitter"></i>
  </a>
  <a href="#" class="btn btn-outline-danger btn-sm me-1">
    <i class="fab fa-instagram"></i>
  </a>
  <a href="#" class="btn btn-outline-secondary btn-sm">
    <i class="fas fa-link"></i>
  </a>
</div>
{% endblock %}

<!-- Beginning of Body -->
{% block content %}
		<br><br>
		<!-- Bootstrap Grid used for Recipe Servings and Ratings -->
		<div class="container text-center">
		<div class="row">
		<div class="col"><h3>Servings: {{recipe.recipe_servings}}</h3></div>
		<div class="col"><h3>Overall Rating: {{recipe.recipe_rating}}</h3></div>
		</div></div>

		<!-- Recipe Ingredients -->
		<h1>Recipe Ingredients</h1>

		<!-- Header Row -->
		<table class="table">
		<thead><tr>
		<th scope="col">#</th>
		<th scope="col">Ingredients</th>
		<th scope="col">Quantity</th>
		</tr></thead>
		
		<!-- Table Body -->
		<tbody>
		{% for qty in qtys %}
		<tr><th scope="row">{{loop.index}}</th>
		<td>{{ing_descs[loop.index]}}</td>
		<td>{{qty.ing_qty}} {{qty.ing_uom}}</td></tr>
		{% endfor %}
		</tbody>
		</table><br><br>

		<!-- Recipe Instructions -->
		<h1>Recipe Instructions</h1>
		<ol class="list-group list-group-numbered list-group-flush">
		<!-- Print parsed instructions as a list -->
		{% for insn in recipe_insns %}
		<li class="list-group-item">{{insn}}</li>		
		{% endfor %}
		</ol>

		<br><br>
		<!-- Rate Recipe -->
		<h1>Rate This Recipe</h1><br>
		<form method="POST" action="/recipe-{{recipe}}">
		<div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
		<label class="form-check-label" for="exampleRadios1">1</label>
		</div>
		<div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2">
		<label class="form-check-label" for="exampleRadios2">2</label>
		</div>
		<div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option3">
		<label class="form-check-label" for="exampleRadios3">3</label>
		</div>
		<div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios4" value="option4">
		<label class="form-check-label" for="exampleRadios4">4</label>
		</div>
		<div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios5" value="option5">
		<label class="form-check-label" for="exampleRadios5">5</label>
		</div>

		<br><br>
		<button type="submit" class="btn btn-primary">Rate Recipe</button>
		</form>

		<br><br>


		<!-- Comment Recipe -->
		<h1>Comment On This Recipe</h1>
		<form>
		<div class="mb-3">
		<textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
		<button type="submit" class="btn btn-primary">Comment</button>
		</div>
		</form>

<script>
function copyShareLink() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
        alert("Link copied to clipboard!");
    }).catch(err => {
        alert("Unable to generate share link. Please try again later.");
        console.error("Clipboard error:", err);
    });
}
</script>
		

{% endblock %}
